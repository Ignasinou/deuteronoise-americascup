<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AIS Heatmap Comparison Slider</title>
<style>
  * { box-sizing: border-box; }
  body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 20px; background:#f8fbff; color:#111; }
  h1 { font-size:1.05rem; margin-bottom:.25rem; }
  p { margin-top:0; color:#333; }
  .img-comp-container {
    position: relative;
    max-width: 1000px;
    margin: 1rem auto;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    background: #fff;
  }
  .img-comp-img {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  .img-comp-img img { display:block; width:100%; height:auto; user-select:none; pointer-events:none; }
  .img-comp-overlay { z-index:2; }
  .img-comp-slider {
    position: absolute;
    z-index: 3;
    cursor: ew-resize;
    width: 4px;
    height: 100%;
    background-color: #ffffff;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 0 0 1px rgba(0,0,0,0.06) inset;
  }
  .slider-handle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    width: 22px;
    height: 22px;
    background: #ffffff;
    border-radius: 50%;
    border: 2px solid #0077b6;
    box-shadow: 0 2px 6px rgba(0,0,0,0.18);
  }
  .label { position:absolute; top:10px; background: rgba(255,255,255,0.9); padding:6px 8px; border-radius:6px; font-weight:600; font-size:0.9rem; }
  .label.left { left:12px; }
  .label.right { right:12px; }
  .caption { max-width:1000px; margin: 0.5rem auto 1rem; color:#444; font-size:0.95rem; }
  @media (max-width:760px){ .img-comp-container{max-width:95%;} }
</style>
</head>
<body>

<h1>Figure 1 — AIS heatmap comparison</h1>
<p class="caption">Baseline (18 July 2024, 12:00–14:00 UTC) vs Pre-race (19 October 2024, 12:00–14:00 UTC). Drag the white handle left/right to compare.</p>

<div class="img-comp-container" id="compContainer">
  <!-- bottom (baseline) -->
  <div class="img-comp-img">
      <img src="{{ site.baseurl }}/plots/heatmap_A_baseline_20240718_1200_1400.png" alt="Baseline AIS Heatmap">
    </div>

    <!-- Top (overlay) image -->
    <div class="img-comp-img img-comp-overlay" id="overlayImg">
      <img src="{{ site.baseurl }}/plots/heatmap_B_prerace_20241019_1200_1400.png" alt="Pre-race AIS Heatmap">
    </div>


  <!-- slider -->
  <div class="img-comp-slider" id="compSlider">
    <div class="slider-handle" aria-hidden="true"></div>
  </div>

  <div class="label left">Baseline</div>
  <div class="label right">Pre-Race</div>
</div>

<script>
  // exact W3Schools-style logic but using relative image paths
  (function(){
    const overlay = document.getElementById('overlayImg');
    const slider = document.getElementById('compSlider');
    const container = document.getElementById('compContainer');
    let clicked = false;

    function init() {
      const w = container.offsetWidth;
      overlay.style.width = (w/2) + 'px';
      slider.style.left = (w/2) + 'px';
    }
    window.addEventListener('load', init);
    window.addEventListener('resize', init);

    function slide(x) {
      const rect = container.getBoundingClientRect();
      let pos = x - rect.left;
      if (pos < 0) pos = 0;
      if (pos > rect.width) pos = rect.width;
      overlay.style.width = pos + 'px';
      slider.style.left = pos + 'px';
    }

    function start(e){ e.preventDefault(); clicked = true; }
    function stop(){ clicked = false; }
    function move(e){
      if(!clicked) return;
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      slide(clientX);
    }

    slider.addEventListener('mousedown', start);
    window.addEventListener('mouseup', stop);
    window.addEventListener('mousemove', move);
    slider.addEventListener('touchstart', start);
    window.addEventListener('touchend', stop);
    window.addEventListener('touchmove', move);
  })();
</script>

</body>
</html>